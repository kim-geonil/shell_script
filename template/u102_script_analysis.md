# U-102.sh 스크립트 분석

## 개요
U-102.sh는 시스템 보안 검사를 위한 bash 스크립트로, 특정 시스템 계정들이 로그인 불가능한 안전한 쉘을 사용하는지 확인합니다.

## 스크립트 목적
시스템 계정의 보안성 검증 - 서비스 계정들이 대화형 로그인을 허용하지 않는 쉘을 사용하는지 점검

## 주요 기능

### 1. 검사 대상 계정 정의
다음 21개의 시스템/서비스 계정을 검사 대상으로 설정:
```
bin, daemon, adm, mail, operator, games, gopher, nobody, dbus,
vcsa, abrt, tcpdump, uuidd, haldaemon, tss, saslauth, postfix,
sshd, ntp, rpc, rpcuser, nfsnobody
```

### 2. 계정별 쉘 검사 로직
- `getent passwd` 명령어로 계정 존재 여부 확인
- 존재하는 계정의 쉘 정보 추출 (/etc/passwd의 7번째 필드)
- 허용되지 않는 쉘 사용 시 실패로 판정

### 3. 허용되는 안전한 쉘
다음 3개 쉘만 허용:
- `/bin/false`
- `/sbin/nologin`  
- `/usr/sbin/nologin`

### 4. 출력 형식
- **문제 발견 시**: `Fail: [계정명] has shell [쉘경로]`
- **최종 결과**: `Pass` 또는 `Fail`

## 상세 실행 절차

### Step 1: 초기화
```bash
fail=false
```
실패 플래그를 false로 초기화

### Step 2: 반복 검사
각 계정에 대해 다음 과정 수행:

1. **계정 존재 확인**
   ```bash
   getent passwd "$account" > /dev/null 2>&1
   ```

2. **쉘 정보 추출**
   ```bash
   shell=$(getent passwd "$account" | awk -F: '{print $7}')
   ```

3. **쉘 검증**
   - 허용 쉘 목록과 비교
   - 부적절한 쉘 발견 시 오류 출력 및 실패 플래그 설정

### Step 3: 최종 판정
실패 플래그 상태에 따라 최종 결과 출력

## 핵심 특징

### 보안 측면
- 시스템 계정의 대화형 로그인 차단 확인
- 서비스 계정의 보안 강화 검증

### 기술적 특징
- **오류 처리**: `> /dev/null 2>&1`로 오류 출력 숨김
- **유연성**: 계정이 존재하지 않으면 무시 (오류로 처리하지 않음)
- **엄격성**: 하나라도 부적절한 쉘 사용 시 전체 실패 처리
- **호환성**: POSIX 호환 bash 스크립트

### 사용되는 명령어
- `getent passwd`: 계정 정보 조회
- `awk -F:`: 콜론 구분자로 필드 분리
- 배열 및 조건문 활용

## 동일 기능 스크립트 생성을 위한 요구사항

다른 AI가 동일한 기능의 스크립트를 생성하려면 다음 요소들을 포함해야 합니다:

1. **정확한 계정 목록** (21개 계정)
2. **3개의 허용 쉘 경로**
3. **getent passwd 사용한 계정 존재 확인**
4. **awk를 이용한 쉘 정보 추출**
5. **실패 시 상세 메시지 출력**
6. **최종 Pass/Fail 판정**
7. **오류 출력 리다이렉션**

## 예상 사용 사례
- 리눅스 시스템 보안 감사
- 시스템 계정 설정 검증
- 보안 정책 준수 확인
- 정기적인 시스템 점검